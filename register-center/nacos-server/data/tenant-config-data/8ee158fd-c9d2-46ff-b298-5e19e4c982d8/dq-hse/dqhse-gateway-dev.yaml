server:
  port: 80
spring:
  jackson:
    time-zone: GMT+8
    date-format: yyyy-MM-dd HH:mm:ss
  zipkin:
    base-url: http://dqzp.dev.pcep.cloud:80
    sender:
      type: web
    sleuth:
      sampler:
        probability: 1
  cloud:
    gateway:
      discovery:
        locator:
          lowerCaseServiceId: true
          enabled: true
      routes:
        # 西安红岸产品-后端 驾驶舱
        - id: dq-4923xianhongan-1
          uri: http://dq-4923xianhongan:8080
          predicates:
            - Path=/front/xaha/api/**
          filters:
            - StripPrefix=3
        - id: front
          uri: http://dq-5474dqhsefront:8080
          predicates:
            - Path=/front/dqhse/**
        - id: filecenter
          uri: http://fss.dev.pcep.cloud
          predicates:
            - Path=/sys/file/**
        - id: tokenuser3
          uri: http://www.dev.pcep.cloud
          predicates:
            - Path=/sys/i18n/**
        - id: token
          uri: http://uc.dev.pcep.cloud
          predicates:
            - Path=/uaa/**,/sys/**,/rfIcons/**
        # arcgis
        - id: arcgis
          uri: http://10.88.104.184:9090
          predicates:
            - Path=/arcgis/**
          filters:
            - StripPrefix=1
        # 西安红岸产品-前端
        - id: dq-5474dqhsefront-xaha
          uri: http://dq-5474dqhsefront-xaha:8080
          predicates:
            - Path=/front/xaha/**
          filters:
            - StripPrefix=2
        # 西安红岸产品-前端2
        - id: dq-5474dqhsefront-xaha2
          uri: http://dq-5474dqhsefront-xaha:8080
          predicates:
            - Path=/components/**
        # 西安红岸产品-后端 驾驶舱
        - id: dq-4923xianhongan
          uri: http://dq-4923xianhongan:8080
          predicates:
            - Path=/bigview/**,/api/**
          filters:
            - StripPrefix=1
        # 系统及其他
        - id: dqhse-sysother
          uri: lb://dqhse-sysother
          predicates:
            - Path=/so/**
          filters:
            - StripPrefix=1
        # 隐患管理
        - id: dqhse-hazardcontrol
          uri: lb://dqhse-hazardcontrol
          predicates:
            - Path=/hc/**
          filters:
            - StripPrefix=1
        # 风险管理
        - id: dqhse-riskcontrol
          uri: lb://dqhse-riskcontrol
          predicates:
            - Path=/rc/**
          filters:
            - StripPrefix=1
        # 流程服务
        - id: dqhse-workflow
          uri: lb://dqhse-workflow
          predicates:
            - Path=/wf/**
          filters:
            - StripPrefix=1
        - id: front1
          uri: http://dq-5474dqhsefront:8080
          predicates:
            - Path=/**
# ribbon客户端负载均衡
ribbon:
  #请求连接超时时间
  ConnectTimeout: 5000
  #请求处理超时时间
  ReadTimeout: 10000
  #对所有操作都进行重试
  OkToRetryOnAllOperations: true
  MaxAutoRetries: 0 #对当前选中实例重试次数，不包括第一次调用
  MaxAutoRetriesNextServer: 0 #切换实例的重试次数
  NFLoadBalancerRuleClassName: com.netflix.loadbalancer.RoundRobinRule #负载策略调整

# 开启Feign的熔断功能，Feign的超时时⻓设置由Ribbon的超时时⻓设置
feign:
  hystrix:
    enabled: true
hystrix:
  command:
    default:
      execution:
        isolation:
          thread:
            #熔断超时设置，默认为1秒
            timeoutInMilliseconds: 10000
# gateway 网关参数
logging:
  level:
  # Feign日志只会对日志级别为debug的做出响应
    com.rflink.gateway.remote.EmployeeServiceClient: debug
gateway:
  auth:
    domain: http://user.api.dev.pcep.cloud/api/v2
    appCode: ia6sazfuv7kp
    appName: 大庆油田安全风险分级管控和隐患排查平台
    tenantCode: n22scab0fw66
    checkUrl: /sys/user/checkToken
    logoutUrl: /auth/logout
    linkEmployeeUrl: http://172.0.16.54:8080
    authorizedFunctionUrl: /sys/user/{userId}/function
    # userFunctiontreeUrl: /sys/user/functiontree/{appId}
    isAppMember: /sys/user/app/{appId}/{userId}/is-member
    logcenterUrl: http://logcenter-server.tlm-shared-components.tlm.pcep.cloud:8080/api/log/writeLog
    token:
      domain: http://pl-tysqrz.tlm.pcep.cloud/tysqrz
      rzYptToken: /rz/rzYptToken
    jwt:
      keyValue: -----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAnGp/Q5lh0P8nPL21oMMrt2RrkT9AW5jgYwLfSUnJVc9G6uR3cXRRDCjHqWU5WYwivcF180A6CWp/ireQFFBNowgc5XaA0kPpzEtgsA5YsNX7iSnUibB004iBTfU9hZ2Rbsc8cWqynT0RyN4TP1RYVSeVKvMQk4GT1r7JCEC+TNu1ELmbNwMQyzKjsfBXyIOCFU/E94ktvsTZUHF4Oq44DBylCDsS1k7/sfZC2G5EU7Oz0mhG8+Uz6MSEQHtoIi6mc8u64Rwi3Z3tscuWG2ShtsUFuNSAFNkY7LkLn+/hxLCu2bNISMaESa8dG22CIMuIeRLVcAmEWEWH5EEforTg+QIDAQAB\n-----END PUBLIC KEY-----
  whites:
    - /front/**
    - /arcgis/**
    - /jsc/**
    - /components/**
    - /bigview/**
    - /api/**
    - /uaa/**
    - /
    - /sys/**