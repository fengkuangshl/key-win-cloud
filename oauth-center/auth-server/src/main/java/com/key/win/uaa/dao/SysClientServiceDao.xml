<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.key.win.uaa.dao.SysClientServiceDao">

	<update id="delete">
		delete from sys_client_service
		<where>
			<if test="clientId != null">
				and client_id = #{clientId}
			</if>
			<if test="serviceId != null">
				and service_id = #{serviceId}
			</if>
		</where>
	</update>

	<select id="findServicesBySlientIds" resultType="com.key.win.common.model.SysService">
		select t.*  from sys_service t
		inner join sys_client_service r on r.service_id = t.id
		where
        t.enable_flag = 1
        and
		r.client_id in
		<foreach collection="clientIds" index="index" item="clientId"
			open="(" separator="," close=")">
			#{clientId}
		</foreach>
		ORDER BY sort ASC
	</select>
</mapper>